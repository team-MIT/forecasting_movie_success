# team-MIT / 영화 흥행 예측 및 개인 성향 맞춤형 추천 시스템

## 1. 프로젝트 개요

### 1) 개발 배경 및 목적
- 많은 사람들이 여가시간을 보내기 위해 영화관을 찾거나 집에서 영화를 다운받아 본다. 이 때 많은 사람들이 어떤 영화를 봐야 할 지에 대한 고민이 시작된다. 이러한 소비자들의 고민거리를 덜어주기 위해 영화관에서 상영중인 영화 중 앞으로 가장 흥행할 만한 영화를 예측해주고 VOD나 스트리밍 서비스를 이용해 집에서 영화를 관람할 사용자들을 위해 개인 취향에 맞는 영화를 추천해 주기 위해 개발된 웹 서비스이다.

### 2) 시스템 아키텍쳐


### 3) 개발 도구
- 개발 환경 : centos6, ubuntu 16:04, windows 10
- 개발 도구 : eclipse, sts, docker, vs code
- 개발 언어 : java, python, scala, html5, css3, java script
- 사용 기술 : Hadoop, spark, mysql, vue.js, spring, mybatis, crawling(bs4, selenium, phantomJS, tweepy), 형태소분석 (KoNLpy, nltk)

### 4) 개발 일정 


## 2. 프로젝트 진행과정

### 1) 데이터 수집
- 본 프로젝트에서 수집한 데이터는 정형데이터와 비정형데이터로 구분된다. 정형데이터는 한국영화진흥위원회(http://www.kofic.or.kr/)에서 영화의 감독, 장르, 관람객 수 등 흥행의 내적 요인을 포함한 CSV파일을 의미한다. 비정형 데이터는 영화의 감상평, 트위터의 SNS 반응 등을 크롤링하여 수집한 데이터를 의미한다. 이 과정에서 파이썬의 BeautifulSoup4, urllib, PhantomJS, selenium 등의 모듈을 사용하였다.

### 2) 감상평 분석을 위한 감성 사전 제작
- 흥행의 외적 요인 분석을 위해 감성 사전을 제작하기로 하였다. 기존 영화에 대한 감상평을 네이버에서 Selenium과 BeautifulSoup 모듈을 사용하여 약 300만개 정도 크롤링하였고, 이 중 약 50만개를 샘플링하여 KoNLPy로 감상평들의 형태소를 나누었다. 영화평에 담긴 긍정적인 단어와 부정적인 단어를 Naive-Bays Classifier를 이용해 분류하여 정확도 약 80%의 감성사전을 제작할 수 있었다.

### 3) 영화 흥행 예측 시스템 개발
- 기존 영화와 관련해 수집한 정형 데이터를 이용하여 회귀분석을 통해 흥행 예측모델을 만들었다. 이 때, 영화의 흥행 요소는 감독, 주연배우, 장르 등으로 흥행 지표는 총 관람객 수를 지표로 관람객 수가 많을 수록 흥행한 영화라고 판단하였다. 따라서, 각 흥행 요소들을 숫자로 맵핑하여 관람객 수에 대한 선형회귀분석을 진행하였고, 그 결과로 상관계수(r^2)가 0.6인 영화 흥행지수예측모델을 구현할 수 있었다.
또, 예측 모델의 정확도를 높이기 위해 트위터의 SNS 반응을 사전에 구축된 감성 사전을 통해 분석을 진행하였다. 파이썬의 Tweepy 모듈을 이용해 트위터에서 영화가 개봉하기 전 기대평, 시사회 반응 등을 크롤링하였고, 이 텍스트 데이터를 형태소 단위로 구분한 것을 감성 사전을 토대로 다시 -1 ~ 1 사이로 정규화 하는 과정을 거쳤다. 이렇게 계산된 점수와 앞서 만든 흥행예측모델의 흥행 지수를 합쳐 좀 더 정확한 영화 흥행 예측 시스템을 구현하였다.

### 4) 사용자의 영화 취향 분석 및 추천 시스템 개발
- 사용자의 영화 취향 분석 및 추천 시스템 개발을 위해 협업 필터링(Collaborative Filtering)알고리즘을 사용하였다. 협업 필터링이란, 많은 사용자들로부터 얻은 기호 정보에 따라 특정 사용자의 관심사를 예측하는 알고리즘으로, 먼저 사용자들에 대한 각 영화의 평가를 수집하여야 한다.
이를 위해, 왓챠(https://watcha.net)에서 약 150명의 개인별 영화 평점데이터를 크롤링하였고, 수집된 데이터를 Spark mlLib에서 제공하는 ALS(Alternating Least Sqares)모듈을 사용해 기능을 구현하였다.
또한, 개인의 평점 데이터를 통계 분석하여 선호하는 감독과 영화배우, 장르, 국가를 차트로 보여주고, 선호하는 영화에 대한 해쉬태그를 워드 클라우드(Word Cloud)로 시각화하였다.

### 5) 시각화


## 3. 결론

### 1) 확장 가능성 및 기대 효과
- 본 프로젝트에서는 사용자들에게 영화관에서 상영 중이거나 개봉할 영화들의 흥행을 예측해주는 기능과 개인에게 맞는 영화를 추천해주는 기능을 구현하였다.
 더 나아가 사용자의 경험에 의한 학습을 다양한 분야로 확장 시킨다면, 사용자가 처한 상황이나 감정, 예를 들어 비가 오는 날 혹은 우울한 날에 어울리는 영화를 추천해줄 수 있다. 
 또한 본 프로젝트와 국내 대형 영화관의 영화 예매 서비스와 연동하여 영화 추천 기능을 제공하게 되는 경우, 사용자들이 영화 관람 후 만족감이 높아져 이후 좀 더 많은 영화를 예매하도록 유도할 수 있는 효과도 기대할 수 있다. 
 


